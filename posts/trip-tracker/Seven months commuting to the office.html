<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Riyan Aditya">
<meta name="dcterms.date" content="2024-02-01">

<title>MyBlog2024 - Seven months commuting to the office</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">MyBlog2024</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Seven months commuting to the office</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Data Analysis</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Riyan Aditya </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 1, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Objective of this notebook: * Plot data taken from AppFibr App * Analyse are there optimum time to leave home or office * Analyse if there are differences of travel time in different days * Analyse if there are differences of travel to the office vs from the office * Analyse if there are significant differences between two rideshare providers * Analyse if there are optimum time to leave home or office</p>
<section id="import-python-module" class="level1">
<h1>Import python module</h1>
<div id="cell-3" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:58.260270Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:57.434540Z&quot;}" data-code_folding="[0]" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import module</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>matplotlib inline</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="import-data-from-gsheet-data-cleaning" class="level1">
<h1>Import data from Gsheet &amp; Data Cleaning</h1>
<div id="cell-5" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:58.276022Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:58.262235Z&quot;}" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'trip_tracker_cleaned.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-6" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:58.306668Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:58.277836Z&quot;}" data-code_folding="[0]" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data Cleaning</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.loc[:, <span class="op">~</span>df.columns.<span class="bu">str</span>.contains(<span class="st">'^Unnamed'</span>)]</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># convert the datetime to the right format</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Date'</span>] <span class="op">=</span> pd.to_datetime(df.Date)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'From_time'</span>] <span class="op">=</span> pd.to_datetime(df.From_time)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'To_time'</span>] <span class="op">=</span> pd.to_datetime(df.To_time)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># convert fare to the right format</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Fare'</span>] <span class="op">=</span> df[<span class="st">'Fare'</span>].<span class="bu">str</span>.replace(<span class="st">','</span>, <span class="st">''</span>).<span class="bu">apply</span>(pd.to_numeric)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Create boolean column to flag only for travel time during peak traffic hour (7-9AM &amp; 4-7PM). Outside these time, the data shall be filtered. Also create additional column to describe which day of the week.</p>
<div id="cell-8" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:58.321991Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:58.307464Z&quot;}" data-code_folding="[0]" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create boolean column to consider data only for peak traffic hour (7-9AM &amp; 4-7PM)</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'peak_hour'</span>] <span class="op">=</span> df[<span class="st">'From_time'</span>].dt.hour.between(<span class="dv">7</span>, <span class="dv">9</span>, inclusive<span class="op">=</span><span class="va">True</span>) <span class="op">|</span> df[<span class="st">'From_time'</span>].dt.hour.between(<span class="dv">16</span>, <span class="dv">18</span>, inclusive<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create column of day of the week</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'day_of_week'</span>] <span class="op">=</span> df[<span class="st">'Date'</span>].dt.day_name()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-9" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:58.353327Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:58.323161Z&quot;}" data-code_folding="[0]" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter for only peak traffic hour</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.loc[df.peak_hour]</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>df </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th">Provider</th>
<th data-quarto-table-cell-role="th">From</th>
<th data-quarto-table-cell-role="th">From_time</th>
<th data-quarto-table-cell-role="th">To</th>
<th data-quarto-table-cell-role="th">To_time</th>
<th data-quarto-table-cell-role="th">Fare</th>
<th data-quarto-table-cell-role="th">Duration</th>
<th data-quarto-table-cell-role="th">from_home</th>
<th data-quarto-table-cell-role="th">peak_hour</th>
<th data-quarto-table-cell-role="th">day_of_week</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>2024-01-16</td>
<td>Provider1</td>
<td>Home</td>
<td>2024-01-16 07:48:00</td>
<td>Office</td>
<td>2024-01-16 08:32:00</td>
<td>46500</td>
<td>44</td>
<td>1</td>
<td>True</td>
<td>Tuesday</td>
</tr>
<tr class="even">
<td>1</td>
<td>2024-01-15</td>
<td>Provider1</td>
<td>Office</td>
<td>2024-01-15 17:27:00</td>
<td>Home</td>
<td>2024-01-15 18:24:00</td>
<td>44000</td>
<td>57</td>
<td>0</td>
<td>True</td>
<td>Monday</td>
</tr>
<tr class="odd">
<td>2</td>
<td>2024-01-15</td>
<td>Provider2</td>
<td>Home</td>
<td>2024-01-15 07:55:00</td>
<td>Office</td>
<td>2024-01-15 08:26:00</td>
<td>61500</td>
<td>31</td>
<td>1</td>
<td>True</td>
<td>Monday</td>
</tr>
<tr class="even">
<td>3</td>
<td>2024-01-12</td>
<td>Provider1</td>
<td>Home</td>
<td>2024-01-12 08:05:00</td>
<td>Office</td>
<td>2024-01-12 08:43:00</td>
<td>53500</td>
<td>38</td>
<td>1</td>
<td>True</td>
<td>Friday</td>
</tr>
<tr class="odd">
<td>4</td>
<td>2024-01-11</td>
<td>Provider1</td>
<td>Home</td>
<td>2024-01-11 08:01:00</td>
<td>Office</td>
<td>2024-01-11 08:46:00</td>
<td>40500</td>
<td>45</td>
<td>1</td>
<td>True</td>
<td>Thursday</td>
</tr>
<tr class="even">
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td>80</td>
<td>2023-10-19</td>
<td>Provider1</td>
<td>Office</td>
<td>2023-10-19 16:31:00</td>
<td>Home</td>
<td>2023-10-19 17:23:00</td>
<td>49500</td>
<td>52</td>
<td>0</td>
<td>True</td>
<td>Thursday</td>
</tr>
<tr class="even">
<td>81</td>
<td>2023-12-19</td>
<td>Provider2</td>
<td>Home</td>
<td>2023-12-19 07:48:00</td>
<td>Office</td>
<td>2023-12-19 08:33:00</td>
<td>51000</td>
<td>45</td>
<td>1</td>
<td>True</td>
<td>Tuesday</td>
</tr>
<tr class="odd">
<td>82</td>
<td>2023-09-25</td>
<td>Provider1</td>
<td>Home</td>
<td>2023-09-25 07:56:00</td>
<td>Office</td>
<td>2023-09-29 08:38:00</td>
<td>56000</td>
<td>42</td>
<td>1</td>
<td>True</td>
<td>Monday</td>
</tr>
<tr class="even">
<td>83</td>
<td>2023-08-10</td>
<td>Provider1</td>
<td>Home</td>
<td>2023-08-10 07:39:00</td>
<td>Office</td>
<td>2023-08-10 08:28:00</td>
<td>50500</td>
<td>49</td>
<td>1</td>
<td>True</td>
<td>Thursday</td>
</tr>
<tr class="odd">
<td>84</td>
<td>2023-10-30</td>
<td>Provider2</td>
<td>Home</td>
<td>2023-10-30 07:16:00</td>
<td>Office</td>
<td>2023-10-30 08:10:00</td>
<td>71500</td>
<td>54</td>
<td>1</td>
<td>True</td>
<td>Monday</td>
</tr>
</tbody>
</table>

<p>85 rows Ã— 11 columns</p>
</div>
</div>
</div>
<div id="cell-10" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:58.368667Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:58.354303Z&quot;}" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>df.dtypes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>Date           datetime64[ns]
Provider               object
From                   object
From_time      datetime64[ns]
To                     object
To_time        datetime64[ns]
Fare                    int64
Duration                int64
from_home               int64
peak_hour                bool
day_of_week            object
dtype: object</code></pre>
</div>
</div>
<div id="cell-11" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:58.399593Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:58.371325Z&quot;}" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>df.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Fare</th>
<th data-quarto-table-cell-role="th">Duration</th>
<th data-quarto-table-cell-role="th">from_home</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>count</td>
<td>85.000000</td>
<td>85.000000</td>
<td>85.000000</td>
</tr>
<tr class="even">
<td>mean</td>
<td>51735.294118</td>
<td>48.905882</td>
<td>0.529412</td>
</tr>
<tr class="odd">
<td>std</td>
<td>8709.459907</td>
<td>11.107294</td>
<td>0.502096</td>
</tr>
<tr class="even">
<td>min</td>
<td>38000.000000</td>
<td>29.000000</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td>25%</td>
<td>45500.000000</td>
<td>40.000000</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td>50%</td>
<td>50000.000000</td>
<td>48.000000</td>
<td>1.000000</td>
</tr>
<tr class="odd">
<td>75%</td>
<td>56000.000000</td>
<td>55.000000</td>
<td>1.000000</td>
</tr>
<tr class="even">
<td>max</td>
<td>75000.000000</td>
<td>83.000000</td>
<td>1.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="data-analysis" class="level1">
<h1>Data Analysis</h1>
<section id="duration-and-fare-comparison-based-on-travel-origination" class="level2">
<h2 class="anchored" data-anchor-id="duration-and-fare-comparison-based-on-travel-origination">Duration and Fare comparison based on travel origination</h2>
<p>Once filtering for travels outside peak hours, we are left with 85 trips with some interesting observations: * I took significantly more trips with Provider1 than Provider2. No, I did not realised that. * The data matched my expectation, where I suspected that trips from home were faster and generally more expensive. * On average Provider1 was cheaper than Provider2, including the minimum fare ever offered to me.This could be an interesting finding on their pricing model, but take this with a grain of salt due to the small sample size especially for trips conducted via Provider2. * Even though fare differences between the 2 providers were somewhat expected, but I did not expect that the average travel time frome Home by Provider1 (42 mins) is significantly lower than Provider2 (48 mins). Route differences may play a factor here.</p>
<section id="duration-in-minutes" class="level3">
<h3 class="anchored" data-anchor-id="duration-in-minutes">Duration (in minutes)</h3>
<div id="cell-16" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:58.430580Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:58.401509Z&quot;}" data-code_folding="[0]" data-execution_count="8">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Describe Duration (in minutes)</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>df.groupby([<span class="st">"From"</span>, <span class="st">"Provider"</span>])[<span class="st">'Duration'</span>].describe().loc[:,[<span class="st">'count'</span>,<span class="st">'mean'</span>,<span class="st">'min'</span>,<span class="st">'max'</span>]].<span class="bu">round</span>().astype(<span class="bu">int</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">max</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">From</th>
<th data-quarto-table-cell-role="th">Provider</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="2" data-valign="top">Home</td>
<td>Provider1</td>
<td>27</td>
<td>42</td>
<td>29</td>
<td>67</td>
</tr>
<tr class="even">
<td>Provider2</td>
<td>18</td>
<td>48</td>
<td>31</td>
<td>69</td>
</tr>
<tr class="odd">
<td rowspan="2" data-valign="top">Office</td>
<td>Provider1</td>
<td>22</td>
<td>54</td>
<td>33</td>
<td>73</td>
</tr>
<tr class="even">
<td>Provider2</td>
<td>18</td>
<td>53</td>
<td>29</td>
<td>83</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-17" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:58.620350Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:58.432318Z&quot;}" data-code_folding="[0]" data-execution_count="9">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Boxplot for travel duration data distribution</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating plot</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>bp <span class="op">=</span> df.boxplot(<span class="st">"Duration"</span>, by<span class="op">=</span>[<span class="st">"From"</span>, <span class="st">"Provider"</span>], ax<span class="op">=</span>ax)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>plt.suptitle(<span class="st">''</span>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting title to graph</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Boxplot of trip duration based on Provider and Trip Origination'</span>)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Label x-axis and y-axis</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Duration (mins)'</span>)</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">''</span>)</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove grid</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>ax.grid(<span class="va">False</span>)</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Add median value text annotation</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, box <span class="kw">in</span> <span class="bu">enumerate</span>(ax.get_xticks()):</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate median value for each box</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>    median_val <span class="op">=</span> df.groupby([<span class="st">"From"</span>, <span class="st">"Provider"</span>]).median().iloc[i][<span class="st">"Duration"</span>].astype(<span class="bu">int</span>)</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add text annotation at the median position</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>    ax.text(box, median_val, <span class="ss">f'Median: </span><span class="ch">\n</span><span class="ss"> </span><span class="sc">{</span>median_val<span class="sc">}</span><span class="ss"> mins'</span>, verticalalignment<span class="op">=</span><span class="st">'bottom'</span>, horizontalalignment<span class="op">=</span><span class="st">'center'</span>, color<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Seven months commuting to the office_files/figure-html/cell-10-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="fare-in-idr" class="level3">
<h3 class="anchored" data-anchor-id="fare-in-idr">Fare (in IDR)</h3>
<div id="cell-19" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:58.651704Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:58.621152Z&quot;}" data-code_folding="[0]" data-execution_count="10">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Describe Fare (in IDR)</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>df.groupby([<span class="st">"From"</span>, <span class="st">"Provider"</span>])[<span class="st">'Fare'</span>].describe().loc[:,[<span class="st">'count'</span>,<span class="st">'mean'</span>,<span class="st">'min'</span>,<span class="st">'max'</span>]].<span class="bu">round</span>(<span class="dv">0</span>).astype(<span class="bu">int</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">max</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">From</th>
<th data-quarto-table-cell-role="th">Provider</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="2" data-valign="top">Home</td>
<td>Provider1</td>
<td>27</td>
<td>53630</td>
<td>40500</td>
<td>71000</td>
</tr>
<tr class="even">
<td>Provider2</td>
<td>18</td>
<td>57472</td>
<td>48000</td>
<td>75000</td>
</tr>
<tr class="odd">
<td rowspan="2" data-valign="top">Office</td>
<td>Provider1</td>
<td>22</td>
<td>47227</td>
<td>38000</td>
<td>69500</td>
</tr>
<tr class="even">
<td>Provider2</td>
<td>18</td>
<td>48667</td>
<td>44500</td>
<td>63500</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-20" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:58.824260Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:58.653725Z&quot;}" data-code_folding="[0]" data-execution_count="11">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Boxplot for travel duration data distribution</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating plot</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>bp <span class="op">=</span> df.boxplot(<span class="st">"Fare"</span>, by<span class="op">=</span>[<span class="st">"From"</span>, <span class="st">"Provider"</span>], ax<span class="op">=</span>ax)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>plt.suptitle(<span class="st">''</span>)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting title to graph</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Boxplot of trip fare based on Provider and Trip Origination'</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Label x-axis and y-axis</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Fare (IDR)'</span>)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">''</span>)</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove grid</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>ax.grid(<span class="va">False</span>)</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Add median value text annotation</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, box <span class="kw">in</span> <span class="bu">enumerate</span>(ax.get_xticks()):</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate median value for each box</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    median_val <span class="op">=</span> df.groupby([<span class="st">"From"</span>, <span class="st">"Provider"</span>]).median().iloc[i][<span class="st">"Fare"</span>].astype(<span class="bu">int</span>)</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add text annotation at the median position</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    ax.text(box, median_val, <span class="ss">f'Median: </span><span class="ch">\n</span><span class="ss"> </span><span class="sc">{</span>median_val<span class="sc">}</span><span class="ss"> IDR'</span>, verticalalignment<span class="op">=</span><span class="st">'bottom'</span>, horizontalalignment<span class="op">=</span><span class="st">'center'</span>, color<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Seven months commuting to the office_files/figure-html/cell-12-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Overall this high level summary suggests that we should deep dive the data even more to answer some of these questions that I would like to explore: * Are there travel time variability for different days? I somewhat believe that traffic is generally worse on Monday mornings. * Are there correlation between fare and travel duration? I find it weird that for similar travel distance, the travel fare from the office is significantly cheaper than from home, especially given that it was common knowledge that the evening traffic around TB Simatupang Road is extremly bad. Even Google Map presents the traffic in dark red! * Are there statistically different travel fare and duration between trips provided by Provider1 and Provider2? If any, which providers maybe cheaper. * Are there optimum time to leave home or office based on the data collected?</p>
</section>
</section>
<section id="travel-time-for-different-days" class="level2">
<h2 class="anchored" data-anchor-id="travel-time-for-different-days">Travel time for different days</h2>
<div id="cell-23" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:58.871449Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:58.825261Z&quot;}" data-code_folding="[0]" data-execution_count="12">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Describe Duration (in minutes)</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>df.groupby([<span class="st">"From"</span>, <span class="st">"day_of_week"</span>])[<span class="st">'Duration'</span>].describe().loc[:,[<span class="st">'count'</span>,<span class="st">'mean'</span>,<span class="st">'min'</span>,<span class="st">'max'</span>]].<span class="bu">round</span>().astype(<span class="bu">int</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">max</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">From</th>
<th data-quarto-table-cell-role="th">day_of_week</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="5" data-valign="top">Home</td>
<td>Friday</td>
<td>4</td>
<td>44</td>
<td>38</td>
<td>50</td>
</tr>
<tr class="even">
<td>Monday</td>
<td>19</td>
<td>45</td>
<td>31</td>
<td>67</td>
</tr>
<tr class="odd">
<td>Thursday</td>
<td>7</td>
<td>44</td>
<td>36</td>
<td>49</td>
</tr>
<tr class="even">
<td>Tuesday</td>
<td>7</td>
<td>45</td>
<td>29</td>
<td>69</td>
</tr>
<tr class="odd">
<td>Wednesday</td>
<td>8</td>
<td>45</td>
<td>37</td>
<td>56</td>
</tr>
<tr class="even">
<td rowspan="5" data-valign="top">Office</td>
<td>Friday</td>
<td>5</td>
<td>59</td>
<td>54</td>
<td>66</td>
</tr>
<tr class="odd">
<td>Monday</td>
<td>14</td>
<td>47</td>
<td>32</td>
<td>59</td>
</tr>
<tr class="even">
<td>Thursday</td>
<td>7</td>
<td>61</td>
<td>51</td>
<td>73</td>
</tr>
<tr class="odd">
<td>Tuesday</td>
<td>5</td>
<td>45</td>
<td>30</td>
<td>65</td>
</tr>
<tr class="even">
<td>Wednesday</td>
<td>9</td>
<td>59</td>
<td>29</td>
<td>83</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-24" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:59.218016Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:58.872511Z&quot;}" data-code_folding="[0,17,32]" data-execution_count="13">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the order of days of the week</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>day_order <span class="op">=</span> [<span class="st">'Monday'</span>, <span class="st">'Tuesday'</span>, <span class="st">'Wednesday'</span>, <span class="st">'Thursday'</span>, <span class="st">'Friday'</span>]</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert 'day_of_week' column to categorical with specified order</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'day_of_week'</span>] <span class="op">=</span> pd.Categorical(df[<span class="st">'day_of_week'</span>], categories<span class="op">=</span>day_order, ordered<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Boxplot for travel duration data distribution</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">10</span>))</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating top subplot</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>bp1 <span class="op">=</span> df[df[<span class="st">'From'</span>]<span class="op">==</span><span class="st">'Home'</span>].boxplot(<span class="st">"Duration"</span>, by<span class="op">=</span><span class="st">"day_of_week"</span>, ax<span class="op">=</span>ax1)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">'From Home'</span>)</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>ax1.set_xlabel(<span class="st">''</span>)</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">'Duration (mins)'</span>)</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>ax1.grid(<span class="va">False</span>)</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Add median value text annotation</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, box <span class="kw">in</span> <span class="bu">enumerate</span>(ax1.get_xticks()):</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate median value for each box</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    median_val <span class="op">=</span> df[df[<span class="st">'From'</span>]<span class="op">==</span><span class="st">'Home'</span>].groupby(<span class="st">"day_of_week"</span>).median().iloc[i][<span class="st">"Duration"</span>].astype(<span class="bu">int</span>)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add text annotation at the median position</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>    ax1.text(box, median_val, <span class="ss">f'Median: </span><span class="ch">\n</span><span class="ss"> </span><span class="sc">{</span>median_val<span class="sc">}</span><span class="ss"> mins'</span>, verticalalignment<span class="op">=</span><span class="st">'bottom'</span>, horizontalalignment<span class="op">=</span><span class="st">'center'</span>, color<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating bottom subplot</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>bp2 <span class="op">=</span> df[df[<span class="st">'From'</span>]<span class="op">==</span><span class="st">'Office'</span>].boxplot(<span class="st">"Duration"</span>, by<span class="op">=</span><span class="st">"day_of_week"</span>, ax<span class="op">=</span>ax2)</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">'From Office'</span>)</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>ax2.set_xlabel(<span class="st">''</span>)</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>ax2.set_ylabel(<span class="st">'Duration (mins)'</span>)</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Add median value text annotation</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, box <span class="kw">in</span> <span class="bu">enumerate</span>(ax2.get_xticks()):</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate median value for each box</span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>    median_val <span class="op">=</span> df[df[<span class="st">'From'</span>]<span class="op">==</span><span class="st">'Office'</span>].groupby(<span class="st">"day_of_week"</span>).median().iloc[i][<span class="st">"Duration"</span>].astype(<span class="bu">int</span>)</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add text annotation at the median position</span></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>    ax2.text(box, median_val, <span class="ss">f'Median: </span><span class="ch">\n</span><span class="ss"> </span><span class="sc">{</span>median_val<span class="sc">}</span><span class="ss"> mins'</span>, verticalalignment<span class="op">=</span><span class="st">'bottom'</span>, horizontalalignment<span class="op">=</span><span class="st">'center'</span>, color<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>plt.suptitle(<span class="st">''</span>)</span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove grid for the second subplot</span></span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a>ax2.grid(<span class="va">False</span>)</span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust layout for better spacing</span></span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Seven months commuting to the office_files/figure-html/cell-14-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>It turns out the data does not show that there are significant travel time on Monday compared to other days. Perhaps it was simply psychological bias since I went to the office more frequently on Mondays for weekly report session with the management team.</p>
<p>However, even with limited data on travel days other than Monday, it is interesting to see that travel from the office is significantly longer on Wednesdays to Fridays. Travels during later part of the week are often over 10 minutes longer compared to travels during Mondays and Tuesdays. I certainly did not realise that.</p>
</section>
<section id="correlation-between-fare-and-duration" class="level2">
<h2 class="anchored" data-anchor-id="correlation-between-fare-and-duration">Correlation between fare and duration</h2>
<p>One usually assumes that ridesharesâ€™ fare is correlated with travel duration (or distance). This is true even for traditional taxis where the meter primarily count the distance travelled. The meter even includes the time spent on travel even when its not moving, eg: in traffic.</p>
<p>We have already seen from the data earlier that the travel fares and durations could differ significantly even for the same travel distance. But, are there any correlation between travel fare and durations? I am especially curious for my travel originated from the office where it was well known that the traffic in TB Simatupang is exteremely bad in the evening. Furthermore it is not unreasonable to assume that the pricing model from the rideshare providers may account for potential delays during travel since similar model has been adopted by the taxis. Afterall they can get these potential delays data from Google Map route traffic, the same as how we as customers see potential time taken in Google Map.</p>
<div id="cell-28" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:59.233801Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:59.219350Z&quot;}" data-execution_count="14">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import stats module to calculate LBF</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> scipy.stats</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-29" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T07:37:28.188253Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T07:37:28.012286Z&quot;}" data-code_folding="[0]" data-execution_count="26">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatter plot for Fare and Duration with color based on 'From'</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate LBF &amp; the R2</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>m1, b1, r_value1, p_value1, std_err1 <span class="op">=</span> scipy.stats.linregress(df[df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Home'</span>] [<span class="st">'Fare'</span>],</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>                                                                  df[df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Home'</span>] [<span class="st">'Duration'</span>])</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>m2, b2, r_value2, p_value2, std_err2 <span class="op">=</span> scipy.stats.linregress(df[df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Office'</span>] [<span class="st">'Fare'</span>],</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>                                                                  df[df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Office'</span>] [<span class="st">'Duration'</span>])</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 2 scatter plot &amp; their LBF &amp; display the R^2</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>scatter1 <span class="op">=</span> ax.scatter(df[df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Home'</span>] [<span class="st">'Fare'</span>], df[df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Home'</span>] [<span class="st">'Duration'</span>],c<span class="op">=</span><span class="st">'red'</span>,label<span class="op">=</span><span class="st">'Home'</span>)</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>ax.plot(df[df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Home'</span>] [<span class="st">'Fare'</span>], m1<span class="op">*</span>df[df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Home'</span>] [<span class="st">'Fare'</span>] <span class="op">+</span> b1,c<span class="op">=</span><span class="st">'red'</span>)</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>ax.annotate(<span class="st">'R^2: '</span> <span class="op">+</span> <span class="bu">str</span>(<span class="st">"</span><span class="sc">{:.2f}</span><span class="st">"</span>.<span class="bu">format</span>(r_value1<span class="op">**</span><span class="dv">2</span>)), xy<span class="op">=</span>(<span class="dv">70000</span>,<span class="dv">51</span>),c<span class="op">=</span><span class="st">'red'</span>)</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>scatter2 <span class="op">=</span> ax.scatter(df[df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Office'</span>] [<span class="st">'Fare'</span>], df[df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Office'</span>] [<span class="st">'Duration'</span>],c<span class="op">=</span><span class="st">'blue'</span>,label<span class="op">=</span><span class="st">'Office'</span>)</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>ax.plot(df[df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Office'</span>] [<span class="st">'Fare'</span>], m2<span class="op">*</span>df[df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Office'</span>] [<span class="st">'Fare'</span>] <span class="op">+</span> b2,c<span class="op">=</span><span class="st">'blue'</span>)</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>ax.annotate(<span class="st">'R^2: '</span> <span class="op">+</span> <span class="bu">str</span>(<span class="st">"</span><span class="sc">{:.2f}</span><span class="st">"</span>.<span class="bu">format</span>(r_value2<span class="op">**</span><span class="dv">2</span>)), xy<span class="op">=</span>(<span class="dv">70000</span>,<span class="dv">60</span>),c<span class="op">=</span><span class="st">'blue'</span>)</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting title to graph</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Scatter Plot of Fare and Duration based on Travel origination'</span>)</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Fare (IDR)'</span>)</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Duration (mins)'</span>)</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Add legend</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Seven months commuting to the office_files/figure-html/cell-16-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Looks like there is no strong correlation between travel fare and travel duration, as indicated by the low <span class="math inline">\(R^{2}\)</span></p>
<p>One hypothesis could be that the demand for service is given higher weight in the ridesharesâ€™ pricing model. Logically my morning trip from Mega Kuningan in the CBD should have higher demand from other prospective riders. In contrast, my evening trip from TB Simatupang simply has less demand around this area.</p>
</section>
<section id="hypothesis-testing" class="level2">
<h2 class="anchored" data-anchor-id="hypothesis-testing">Hypothesis testing</h2>
<p>In this section we will conduct hypothesis testing whether there are significant trip and fare differences between the two providers. If pvalue &lt; 0.05 then we can considered that the samples are statistically different.</p>
<div id="cell-34" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:59.438098Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:59.425017Z&quot;}" data-code_folding="[0]" data-execution_count="16">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import stats module</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> ttest_ind</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="overall-fare-from-home-vs-from-office" class="level3">
<h3 class="anchored" data-anchor-id="overall-fare-from-home-vs-from-office">Overall fare from home vs from office</h3>
<div id="cell-36" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:59.453221Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:59.439011Z&quot;}" data-code_folding="[0]" data-execution_count="17">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ttest for fare of home vs office</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">#define samples</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>cat1 <span class="op">=</span> df[df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Home'</span>] [<span class="st">'Fare'</span>]</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>cat2 <span class="op">=</span> df[df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Office'</span>] [<span class="st">'Fare'</span>]</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co">#perform Welch's t-test</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>ttest_ind(cat1, cat2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>Ttest_indResult(statistic=4.220692123629692, pvalue=6.191721153034327e-05)</code></pre>
</div>
</div>
<p>Fare originated from home and office are statistically different</p>
</section>
<section id="fare-from-home-for-provider1-vs-provider2" class="level3">
<h3 class="anchored" data-anchor-id="fare-from-home-for-provider1-vs-provider2">Fare from home for Provider1 vs Provider2</h3>
<div id="cell-39" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:59.468375Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:59.454014Z&quot;}" data-code_folding="[0]" data-execution_count="18">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ttest for fare from home between provider 1 &amp; 2</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">#define samples</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>cat1 <span class="op">=</span> df[(df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Home'</span>) <span class="op">&amp;</span> (df[<span class="st">'Provider'</span>] <span class="op">==</span> <span class="st">'Provider1'</span>)] [<span class="st">'Fare'</span>]</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>cat2 <span class="op">=</span> df[(df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Home'</span>) <span class="op">&amp;</span> (df[<span class="st">'Provider'</span>] <span class="op">==</span> <span class="st">'Provider2'</span>)] [<span class="st">'Fare'</span>]</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co">#perform Welch's t-test</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>ttest_ind(cat1, cat2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>Ttest_indResult(statistic=-1.4881017656220044, pvalue=0.14402157661902457)</code></pre>
</div>
</div>
<p>There is no significant difference between fare for trips originated from home for rides conducted via Provider1 and Provider2</p>
</section>
<section id="fare-from-office-for-provider1-vs-provider2" class="level3">
<h3 class="anchored" data-anchor-id="fare-from-office-for-provider1-vs-provider2">Fare from office for Provider1 vs Provider2</h3>
<div id="cell-42" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:59.483677Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:59.469253Z&quot;}" data-code_folding="[0]" data-execution_count="19">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ttest for fare from office between provider 1 &amp; 2</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co">#define samples</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>cat1 <span class="op">=</span> df[(df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Office'</span>) <span class="op">&amp;</span> (df[<span class="st">'Provider'</span>] <span class="op">==</span> <span class="st">'Provider1'</span>)] [<span class="st">'Fare'</span>]</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>cat2 <span class="op">=</span> df[(df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Office'</span>) <span class="op">&amp;</span> (df[<span class="st">'Provider'</span>] <span class="op">==</span> <span class="st">'Provider2'</span>)] [<span class="st">'Fare'</span>]</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co">#perform Welch's t-test</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>ttest_ind(cat1, cat2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>Ttest_indResult(statistic=-0.6291093039880321, pvalue=0.5330415051263946)</code></pre>
</div>
</div>
<p>There is no significant difference between fare for trips originated from office for rides conducted via Provider1 and Provider2</p>
</section>
<section id="overall-duration-from-home-vs-from-office" class="level3">
<h3 class="anchored" data-anchor-id="overall-duration-from-home-vs-from-office">Overall duration from home vs from office</h3>
<div id="cell-45" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:59.499752Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:59.484644Z&quot;}" data-code_folding="[0]" data-execution_count="20">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ttest for duration of home vs office</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co">#define samples</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>cat1 <span class="op">=</span> df[df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Home'</span>] [<span class="st">'Duration'</span>]</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>cat2 <span class="op">=</span> df[df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Office'</span>] [<span class="st">'Duration'</span>]</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co">#perform Welch's t-test</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>ttest_ind(cat1, cat2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>Ttest_indResult(statistic=-3.985717654046981, pvalue=0.0001439696232272107)</code></pre>
</div>
</div>
<p>Trip duration originated from home and office are statistically different</p>
</section>
<section id="duration-from-home-for-provider1-vs-provider2" class="level3">
<h3 class="anchored" data-anchor-id="duration-from-home-for-provider1-vs-provider2">Duration from home for Provider1 vs Provider2</h3>
<div id="cell-48" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:59.514819Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:59.500645Z&quot;}" data-code_folding="[0]" data-execution_count="21">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ttest for fare from home between provider 1 &amp; 2</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co">#define samples</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>cat1 <span class="op">=</span> df[(df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Home'</span>) <span class="op">&amp;</span> (df[<span class="st">'Provider'</span>] <span class="op">==</span> <span class="st">'Provider1'</span>)] [<span class="st">'Duration'</span>]</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>cat2 <span class="op">=</span> df[(df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Home'</span>) <span class="op">&amp;</span> (df[<span class="st">'Provider'</span>] <span class="op">==</span> <span class="st">'Provider2'</span>)] [<span class="st">'Duration'</span>]</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co">#perform Welch's t-test</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>ttest_ind(cat1, cat2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>Ttest_indResult(statistic=-2.6960841168660505, pvalue=0.009974894309153371)</code></pre>
</div>
</div>
<p>Trip duration from home is statistically different between Provider1 and Provider2</p>
</section>
<section id="duration-from-office-for-provider1-vs-provider2" class="level3">
<h3 class="anchored" data-anchor-id="duration-from-office-for-provider1-vs-provider2">Duration from office for Provider1 vs Provider2</h3>
<div id="cell-51" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:59.530948Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:59.517820Z&quot;}" data-code_folding="[0]" data-execution_count="22">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ttest for fare from office between provider 1 &amp; 2</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co">#define samples</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>cat1 <span class="op">=</span> df[(df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Office'</span>) <span class="op">&amp;</span> (df[<span class="st">'Provider'</span>] <span class="op">==</span> <span class="st">'Provider1'</span>)] [<span class="st">'Duration'</span>]</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>cat2 <span class="op">=</span> df[(df[<span class="st">'From'</span>] <span class="op">==</span> <span class="st">'Office'</span>) <span class="op">&amp;</span> (df[<span class="st">'Provider'</span>] <span class="op">==</span> <span class="st">'Provider2'</span>)] [<span class="st">'Duration'</span>]</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="co">#perform Welch's t-test</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>ttest_ind(cat1, cat2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>Ttest_indResult(statistic=0.19722782722858406, pvalue=0.8447004284799403)</code></pre>
</div>
</div>
<p>There is no significant difference between trips duration originated from office if taken by Provider1 and Provider2</p>
</section>
</section>
<section id="optimum-time-to-leave-home-or-office" class="level2">
<h2 class="anchored" data-anchor-id="optimum-time-to-leave-home-or-office">Optimum time to leave home or office</h2>
<p>This section shall explores my original goal of collecting these data. Are there optimum time to leave home or office to minimise the duration of being stuck in Jakartaâ€™s traffic.</p>
<p>For simplicity, I will group by the travel start time in 5 minutes interval. Then we can see the average travel time for each of those 5 minutes group to see if an optimum time can be observed.</p>
<div id="cell-55" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T07:45:58.058566Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T07:45:58.009978Z&quot;}" data-code_folding="[0]" data-execution_count="27">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract only the time component</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by every 5 minutes</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'hour'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'From_time'</span>]).dt.hour</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'minute'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'From_time'</span>]).dt.minute</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'interval'</span>] <span class="op">=</span> df.<span class="bu">apply</span>(<span class="kw">lambda</span> row: <span class="ss">f"</span><span class="sc">{</span>row[<span class="st">'hour'</span>]<span class="sc">:02d}</span><span class="ss">:</span><span class="sc">{</span>(row[<span class="st">'minute'</span>] <span class="op">//</span> <span class="dv">5</span>) <span class="op">*</span> <span class="dv">5</span><span class="sc">:02d}</span><span class="ss">"</span>, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by the calculated intervals</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> df.groupby(<span class="st">'interval'</span>)[<span class="st">'Duration'</span>].agg( mean<span class="op">=</span>( <span class="st">'mean'</span>), count<span class="op">=</span>(<span class="st">'count'</span>)).reset_index()</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>result</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">interval</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>07:15</td>
<td>54.000000</td>
<td>1</td>
</tr>
<tr class="even">
<td>1</td>
<td>07:30</td>
<td>46.000000</td>
<td>3</td>
</tr>
<tr class="odd">
<td>2</td>
<td>07:35</td>
<td>49.000000</td>
<td>7</td>
</tr>
<tr class="even">
<td>3</td>
<td>07:40</td>
<td>42.636364</td>
<td>11</td>
</tr>
<tr class="odd">
<td>4</td>
<td>07:45</td>
<td>45.066667</td>
<td>15</td>
</tr>
<tr class="even">
<td>5</td>
<td>07:50</td>
<td>44.250000</td>
<td>4</td>
</tr>
<tr class="odd">
<td>6</td>
<td>07:55</td>
<td>36.500000</td>
<td>2</td>
</tr>
<tr class="even">
<td>7</td>
<td>08:00</td>
<td>45.000000</td>
<td>1</td>
</tr>
<tr class="odd">
<td>8</td>
<td>08:05</td>
<td>38.000000</td>
<td>1</td>
</tr>
<tr class="even">
<td>9</td>
<td>16:20</td>
<td>63.000000</td>
<td>3</td>
</tr>
<tr class="odd">
<td>10</td>
<td>16:25</td>
<td>55.000000</td>
<td>2</td>
</tr>
<tr class="even">
<td>11</td>
<td>16:30</td>
<td>51.500000</td>
<td>2</td>
</tr>
<tr class="odd">
<td>12</td>
<td>16:35</td>
<td>62.000000</td>
<td>1</td>
</tr>
<tr class="even">
<td>13</td>
<td>16:40</td>
<td>66.000000</td>
<td>1</td>
</tr>
<tr class="odd">
<td>14</td>
<td>16:50</td>
<td>53.000000</td>
<td>2</td>
</tr>
<tr class="even">
<td>15</td>
<td>16:55</td>
<td>57.750000</td>
<td>4</td>
</tr>
<tr class="odd">
<td>16</td>
<td>17:00</td>
<td>54.000000</td>
<td>1</td>
</tr>
<tr class="even">
<td>17</td>
<td>17:05</td>
<td>58.000000</td>
<td>1</td>
</tr>
<tr class="odd">
<td>18</td>
<td>17:10</td>
<td>70.000000</td>
<td>1</td>
</tr>
<tr class="even">
<td>19</td>
<td>17:25</td>
<td>58.000000</td>
<td>3</td>
</tr>
<tr class="odd">
<td>20</td>
<td>17:30</td>
<td>49.000000</td>
<td>2</td>
</tr>
<tr class="even">
<td>21</td>
<td>17:35</td>
<td>55.500000</td>
<td>4</td>
</tr>
<tr class="odd">
<td>22</td>
<td>17:40</td>
<td>40.000000</td>
<td>1</td>
</tr>
<tr class="even">
<td>23</td>
<td>17:50</td>
<td>49.000000</td>
<td>2</td>
</tr>
<tr class="odd">
<td>24</td>
<td>18:00</td>
<td>73.000000</td>
<td>1</td>
</tr>
<tr class="even">
<td>25</td>
<td>18:05</td>
<td>56.500000</td>
<td>2</td>
</tr>
<tr class="odd">
<td>26</td>
<td>18:15</td>
<td>46.000000</td>
<td>2</td>
</tr>
<tr class="even">
<td>27</td>
<td>18:35</td>
<td>32.500000</td>
<td>2</td>
</tr>
<tr class="odd">
<td>28</td>
<td>18:40</td>
<td>42.000000</td>
<td>2</td>
</tr>
<tr class="even">
<td>29</td>
<td>18:55</td>
<td>36.000000</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-56" class="cell" data-executetime="{&quot;end_time&quot;:&quot;2024-02-01T06:35:59.937373Z&quot;,&quot;start_time&quot;:&quot;2024-02-01T06:35:59.583753Z&quot;}" data-code_folding="[0]" data-execution_count="24">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create two subplots side by side</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">5</span>))</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>result[<span class="st">'hour'</span>] <span class="op">=</span> pd.to_datetime(result[<span class="st">'interval'</span>]).dt.hour</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot for data before midday</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].bar(result[result[<span class="st">'hour'</span>] <span class="op">&lt;</span> <span class="dv">12</span>][<span class="st">'interval'</span>], result[result[<span class="st">'hour'</span>] <span class="op">&lt;</span> <span class="dv">12</span>][<span class="st">'mean'</span>])</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].set_title(<span class="st">'Trip from Home'</span>)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].set_xlabel(<span class="st">''</span>)</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].set_ylabel(<span class="st">'Duration (mins)'</span>)</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>].tick_params(axis<span class="op">=</span><span class="st">'x'</span>, rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot for data after midday</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].bar(result[result[<span class="st">'hour'</span>] <span class="op">&gt;=</span> <span class="dv">12</span>][<span class="st">'interval'</span>], result[result[<span class="st">'hour'</span>] <span class="op">&gt;=</span> <span class="dv">12</span>][<span class="st">'mean'</span>])</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].set_title(<span class="st">'Trip from Office'</span>)</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].set_xlabel(<span class="st">''</span>)</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].set_ylabel(<span class="st">'Duration (mins)'</span>)</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>].tick_params(axis<span class="op">=</span><span class="st">'x'</span>, rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust layout for better spacing</span></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Show plot</span></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Seven months commuting to the office_files/figure-html/cell-26-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>There is no indication of an optimum time to leave home or office. Though there are a slight indication that leaving home later resulting in less traffic to the office.</p>
<p>Another minor observation is that I was significantly more consistent to leave at home around the 7:40-7:50 window, where this 10 minutes window represents 58% of my travel start time in the morning. In contrast, my start time leaving the office is way more distributed, which could be contributed by more variety of workloads at the office.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>